{% extends "layout.html" %}

{% block extra_head %}
    <link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet">
    <script src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>

    <script src="{{ url_for('static', filename='js/general.js') }}"></script>
    <script type="text/javascript">
      {% if selected_dict and selected_ids %}
      var selected_dict = {{selected_dict|safe}};
      var selected_ids = {{selected_ids|safe}};

      function selectDefaultValues() {
        var selectField;
        var option;
        for (i = 0; i < selected_ids.length; i++){
          selectField = document.getElementById(selected_ids[i]);
          option = getSelectOption(selectField, selected_dict[selected_ids[i]] );
          option.setAttribute("selected","");
        }
      }

      window.onload = selectDefaultValues;
      {% endif %}
    </script>
{% endblock %}

{% block content %}
<div class="container sandik-form">
  <h2 class="sandik-title-form">{{ info.title }}</h2>

  {% for category, message in get_flashed_messages(with_categories=true) %}
  <div class="alert alert-{{ category }}" role="alert">
      {{ message }}
  </div>
  {% endfor %}

  {% if info.errors %}
  <div class="alert alert-danger sandik-alert-list" role="alert">
    <ul>
      {% for error in info.errors %}
      <li>{{ error }}</li>
      {% endfor %}
    </ul>
  </div>
  {% endif %}

  {{ info.form.open|safe }}
    {{ info.form.csrf_token }}
    {% for field in info.form %}
    {% if field.type in ["SubmitField"] %}
    <div class="form-group sandik-form-btn-group">
      {{ field }}
    </div>
    {% else %}
    <div class="form-group sandik-form-group">
      {{ field.label }}
      {{ field }}
    </div>
    {% endif %}
    {% endfor %}
  {{ info.form.close|safe }} <!-- return """</form>""" -->
</div>
{% endblock %}